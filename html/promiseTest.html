<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script src="../js/jquery.js"></script>
<script>
    function clone(obj){
        var cloneObj = Array.isArray(obj) ? [] : {};
        if(obj && typeof obj === 'object'){
            for(key in obj){
                if(obj.hasOwnProperty(key)){
                    //如果对象的属性还是对象  则递归调用
                    if(obj[key] && typeof obj[key] === 'object'){
                        cloneObj[key] = clone(obj[key])
                    }else{
                        cloneObj[key] = obj[key]
                    }
                }
            }
        }
        return cloneObj;
    }

    var obj = {
        name:'zhang',
        say:function(){
            console.log('hi');
        },
        a:undefined,
        b:{c:'hello'}
    }
/*    var obj2 = {...obj};
    obj.b.c = 'world'
    console.log(obj.b.c);  //world
    console.log(obj2.b.c); //world
    console.log(obj === obj2); //true*/

  /*  var obj2 = JSON.parse(JSON.stringify(obj))
    obj2.b.c = 'world'
    console.log(obj.b.c);  //hello
    console.log(obj2.b.c); //world
    console.log(obj === obj2); //false
    console.log(obj);
    console.log(obj2);*/

    var obj2 = clone(obj);
    obj2.b.c = 'world'
  /*  console.log(obj.b.c);
    console.log(obj2.b.c);
    console.log(obj === obj2);
    console.log(obj);
    console.log(obj2);*/

    let p = new Promise((resolve, reject) => {
        //做一些异步操作
        setTimeout(function(){
            var num = Math.ceil(Math.random()*10); //生成1-10的随机数
            console.log('num====', num)
            if(num<=5){
                resolve(num);
            }
            else{
                reject('数字太大了');
            }
        }, 2000);
    });
    p.then((data) => {
            console.log('resolved',data);
        },(err) => {
            console.log('rejected',err);
        }
    );


</script>
</html>
